#!/bin/bash
#
# Configuration file for the Golden Drake Linux (GDL) installer.
#
# Copyright (C) 2020-2021 Golden Drake Studios: goldendrakestudios.com
# Forked originally from the Anarchy installer: anarchyinstaller.gitlab.io
#
# shellcheck disable=SC2034,SC2155

# Wi-Fi globals: provide SSID and password here to auto-connect
WIFI_SSID=''
WIFI_PASSWORD=''
WIFI_AVAILABLE='true'

# Globals for use with 'dialog'
readonly DEFAULT_BACKTITLE="Golden Drake Linux v1.0.0"
readonly I='\Z3*\Zn' # item (to mark unordered list items)
TITLE=''
BACKTITLE=''

# Default non-AUR packages to install
BASE_PACKAGES='
  acpi
  alsa-utils
  arch-wiki-docs
  arch-wiki-lite
  asciiquarium
  atril
  audacious
  base-devel
  bash
  bash-completion
  btrfs-progs
  bzip2
  cheese
  celluloid
  cmatrix
  cool-retro-term
  coreutils
  cowsay
  cpupower
  dhcpcd
  dialog
  dosfstools
  e2fsprogs
  ffmpegthumbnailer
  file-roller
  fortune-mod
  figlet
  file
  filesystem
  findutils
  galculator
  gamemode lib32-gamemode
  gawk
  gcc-libs
  gcolor2
  gettext
  git
  git-lfs
  glibc
  gnome-characters
  gnome-keyring
  gnu-netcat
  grep
  grub
  gst-libav
  gst-plugins-base
  gst-plugins-good
  gst-plugins-bad
  gst-plugins-ugly
  gufw
  gvfs
  gvfs-mtp
  gvfs-smb
  gvim
  gzip
  inetutils
  iproute2
  iputils
  jp2a
  libreoffice-fresh
  libsecret
  licenses
  lightdm
  lightdm-gtk-greeter
  lightdm-gtk-greeter-settings
  linux
  linux-firmware
  linux-headers
  lolcat
  lvm2
  man-db
  man-pages
  mesa lib32-mesa
  neofetch
  networkmanager
  network-manager-applet
  noto-fonts
  noto-fonts-emoji
  noto-fonts-extra
  ntfs-3g
  openssh
  p7zip
  pacman
  pacman-contrib
  pavucontrol
  pciutils
  pipewire
  poppler-data
  procps-ng
  ps_mem
  psmisc
  pulseaudio
  pulseaudio-alsa
  redshift
  reflector
  sed
  shadow
  sl
  soundfont-fluid
  sudo
  systemd
  systemd-sysvcompat
  tar
  terminator
  texinfo
  tree
  ttf-dejavu
  ufw
  unrar
  unzip
  util-linux
  vi
  vkd3d lib32-vkd3d
  wget
  wtf
  xchm
  xdg-user-dirs
  xfce4
  xfce4-goodies
  xorg-apps
  xorg-server
  xorg-xinit
  xterm
  xz
  zip
'

# Packages to install after the base install (esp. AUR software)
AUR_AND_OPTIONAL_PACKAGES='
  boxes
  cbonsai
  matcha-gtk-theme
  mugshot
  no-more-secrets
  surfn-icons-git
  toilet
  xcursor-breeze
  xfce-superkey-git
'

# If Lutris is selected, all these will be installed as they're often necessary
# or helpful for running non-Steam Windows games/apps (such as Battle.net).
# Main source: https://github.com/lutris/docs/blob/master/WineDependencies.md
LUTRIS_PACKAGES='
  lutris
  wine-staging
  giflib lib32-giflib
  libpng lib32-libpng
  libldap lib32-libldap
  gnutls lib32-gnutls
  mpg123 lib32-mpg123
  openal lib32-openal
  v4l-utils lib32-v4l-utils
  libpulse lib32-libpulse
  libgpg-error lib32-libgpg-error
  alsa-plugins lib32-alsa-plugins
  alsa-lib lib32-alsa-lib
  libjpeg-turbo lib32-libjpeg-turbo
  sqlite lib32-sqlite
  libxcomposite lib32-libxcomposite
  libxinerama lib32-libxinerama
  libgcrypt lib32-libgcrypt
  ncurses lib32-ncurses
  opencl-icd-loader lib32-opencl-icd-loader
  python-magic
  libxslt lib32-libxslt
  libva lib32-libva
  gtk3 lib32-gtk3
  gst-plugins-base-libs lib32-gst-plugins-base-libs
  vulkan-icd-loader lib32-vulkan-icd-loader
  wine-gecko
  wine-mono
  winetricks
  samba
  sdl lib32-sdl
  fluidsynth lib32-fluidsynth
  libva-vdpau-driver lib32-libva-vdpau-driver
  libcanberra-pulse lib32-libcanberra-pulse
'

# GPU-related globals
GRAPHICS_CHIPSET='Unknown'
DEFAULT_GRAPHICS_DRIVER='xf86-video-vesa'

# Partitioning-related globals
DRIVE=''
ROOT=''
BOOT=''
ESP_MNT=''
SWAP_SIZE=''
GPT=''
UEFI=''
SYSTEM_MOUNTED='false'
SYSTEM_AUTO_ENCRYPTED='false'

# User-specific globals
USERNAME=''
FULL_NAME=''
PASSWORD=''
HOSTNAME='golden'
TIME_ZONE=''
KEYMAP=''
LANG_FILE=''

# Misc. globals
readonly LOG_FILE='/root/gdl.log'
readonly SSL_KEY="$(openssl rand -base64 32)"
readonly VM_TYPE="$(systemd-detect-virt)"
BATTERY='none'
USB='none'
BLUETOOTH_AVAILABLE='false'
REDUCE_EXTRANEOUS_TEXT='false'

# Color constants for use with 'echo'
readonly BLACK='\e[0;30m'
readonly RED='\e[0;31m'
readonly GREEN='\e[0;32m'
readonly YELLOW='\e[0;33m'
readonly BLUE='\e[0;34m'
readonly MAGENTA='\e[0;35m'
readonly CYAN='\e[0;36m'
readonly WHITE='\e[0;37m'
readonly BOLD_BLACK='\e[1;30m'
readonly BOLD_RED='\e[1;31m'
readonly BOLD_GREEN='\e[1;32m'
readonly BOLD_YELLOW='\e[1;33m'
readonly BOLD_BLUE='\e[1;34m'
readonly BOLD_MAGENTA='\e[1;35m'
readonly BOLD_CYAN='\e[1;36m'
readonly BOLD_WHITE='\e[1;37m'
readonly COLOR_RESET='\e[m'

# Color scheme for installer
tput civis
echo -en '\e]P0000000' #darkblack (black)
echo -en '\e]P1800000' #darkred (maroon)
echo -en '\e]P200A86B' #darkgreen (jade)
echo -en '\e]P3DA9100' #darkyellow/brown (harvest gold)
echo -en '\e]P4082567' #darkblue (sapphire)
echo -en '\e]P5AB274F' #darkmagenta (amaranth purple)
echo -en '\e]P63AA8C1' #darkcyan (moonstone)
echo -en '\e]P7C0C0C0' #darkwhite/lightgrey (silver)
echo -en '\e]P8555555' #lightblack/darkgrey (Davy's gray)
echo -en '\e]P9FF2400' #lightred (scarlet)
echo -en '\e]PA50C878' #lightgreen (emerald)
echo -en '\e]PBD4AF37' #lightyellow (metallic gold)
echo -en '\e]PC318CE7' #lightblue (bleu de France)
echo -en '\e]PDE0115F' #lightmagenta (ruby)
echo -en '\e]PE7FFFD4' #lightcyan (aquamarine)
echo -en '\e]PFE5E4E2' #lightwhite (platinum)
setterm -background black -foreground yellow -store
tput cnorm
